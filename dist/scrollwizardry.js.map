{"version":3,"file":"scrollwizardry.js","sources":["../src/_util.js","../src/Event.js","../src/Indicator.js","../src/Scene.js","../src/Controller.js","../src/index.js"],"sourcesContent":["/* eslint-env browser */\r\n\r\nconst U = {};\r\n\r\nlet i;\r\n\r\n/**\r\n   * ------------------------------\r\n   * Type testing\r\n   * ------------------------------\r\n   */\r\n\r\nconst _type = v => Object.prototype.toString.call(v).replace(/^\\[object (.+)\\]$/, '$1').toLowerCase();\r\n_type.String = v => _type(v) === 'string';\r\n_type.Function = v => _type(v) === 'function';\r\n_type.Array = v => Array.isArray(v);\r\n_type.Number = v => !_type.Array(v) && (v - parseFloat(v) + 1) >= 0;\r\n_type.DomElement = o => (typeof HTMLElement === 'object' ? o instanceof HTMLElement : // DOM2\r\n  o && typeof o === 'object' && o !== null && o.nodeType === 1 && typeof o.nodeName === 'string');\r\nU.type = _type;\r\n\r\n/**\r\n   * ------------------------------\r\n   * Internal helpers\r\n   * ------------------------------\r\n   */\r\n\r\n// parse float and fall back to 0.\r\nconst floatval = number => parseFloat(number) || 0;\r\n\r\n// get current style IE safe (otherwise IE would return calculated values for 'auto')\r\nconst _getComputedStyle = elem => (elem.currentStyle ? elem.currentStyle : window.getComputedStyle(elem));\r\n\r\n// get element dimension (width or height)\r\nconst _dimension = (which, elem, outer, includeMargin) => {\r\n  elem = (elem === document) ? window : elem;\r\n  if (elem === window) {\r\n    includeMargin = false;\r\n  } else if (!_type.DomElement(elem)) {\r\n    return 0;\r\n  }\r\n  which = which.charAt(0).toUpperCase() + which.substr(1).toLowerCase();\r\n  let dimension = (outer ? elem[`offset${which}`] || elem[`outer${which}`] : elem[`client${which}`] || elem[`inner${which}`]) || 0;\r\n  if (outer && includeMargin) {\r\n    const style = _getComputedStyle(elem);\r\n    dimension += which === 'Height' ? floatval(style.marginTop) + floatval(style.marginBottom) : floatval(style.marginLeft) + floatval(style.marginRight);\r\n  }\r\n  return dimension;\r\n};\r\n\r\n  // converts 'margin-top' into 'marginTop'\r\nconst _camelCase = str => str.replace(/^[^a-z]+([a-z])/g, '$1').replace(/-([a-z])/g, g => g[1].toUpperCase());\r\n\r\n/**\r\n   * ------------------------------\r\n   * External helpers\r\n   * ------------------------------\r\n   */\r\n\r\n// extend obj â€“ same as jQuery.extend({}, objA, objB)\r\nU.extend = function (obj) {\r\n  obj = obj || {};\r\n  for (i = 1; i < arguments.length; i++) {\r\n    if (!arguments[i]) {\r\n      continue;\r\n    }\r\n    for (const key in arguments[i]) {\r\n      if (arguments[i].hasOwnProperty(key)) {\r\n        obj[key] = arguments[i][key];\r\n      }\r\n    }\r\n  }\r\n  return obj;\r\n};\r\n\r\n// check if a css display type results in margin-collapse or not\r\nU.isMarginCollapseType = str => ['block', 'flex', 'list-item', 'table', '-webkit-box'].indexOf(str) > -1;\r\n\r\n// implementation of requestAnimationFrame\r\n// based on https://gist.github.com/paulirish/1579671\r\n\r\nlet lastTime = 0;\r\n\r\nconst vendors = ['ms', 'moz', 'webkit', 'o'];\r\nlet _requestAnimationFrame = window.requestAnimationFrame;\r\nlet _cancelAnimationFrame = window.cancelAnimationFrame;\r\n\r\n// try vendor prefixes if the above doesn't work\r\nfor (i = 0; !_requestAnimationFrame && i < vendors.length; ++i) {\r\n  _requestAnimationFrame = window[`${vendors[i]}RequestAnimationFrame`];\r\n  _cancelAnimationFrame = window[`${vendors[i]}CancelAnimationFrame`] || window[`${vendors[i]}CancelRequestAnimationFrame`];\r\n}\r\n\r\n// fallbacks\r\nif (!_requestAnimationFrame) {\r\n  _requestAnimationFrame = (callback) => {\r\n    const currTime = new Date().getTime();\r\n    const timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n    const id = window.setTimeout(() => { callback(currTime + timeToCall); }, timeToCall);\r\n    lastTime = currTime + timeToCall;\r\n    return id;\r\n  };\r\n}\r\n\r\nif (!_cancelAnimationFrame) {\r\n  _cancelAnimationFrame = (id) => {\r\n    window.clearTimeout(id);\r\n  };\r\n}\r\n\r\nU.rAF = _requestAnimationFrame.bind(window);\r\nU.cAF = _cancelAnimationFrame.bind(window);\r\n\r\nconst loglevels = ['error', 'warn', 'log'];\r\n\r\nconst console = window.console || {};\r\n\r\nconsole.log = console.log || (() => {}); // no console log, well - do nothing then...\r\n\r\n// make sure methods for all levels exist.\r\nfor (i = 0; i < loglevels.length; i++) {\r\n  const method = loglevels[i];\r\n  if (!console[method]) {\r\n    console[method] = console.log; // prefer .log over nothing\r\n  }\r\n}\r\n\r\nU.log = function (loglevel) {\r\n  if (loglevel > loglevels.length || loglevel <= 0) loglevel = loglevels.length;\r\n  const now = new Date();\r\n  const time = `${(`0${now.getHours()}`).slice(-2)}:${(`0${now.getMinutes()}`).slice(-2)}:${(`0${now.getSeconds()}`).slice(-2)}:${(`00${now.getMilliseconds()}`).slice(-3)}`;\r\n  const method = loglevels[loglevel - 1];\r\n  const args = Array.prototype.splice.call(arguments, 1);\r\n  const func = Function.prototype.bind.call(console[method], console);\r\n  args.unshift(time);\r\n  func.apply(console, args);\r\n};\r\n\r\n/**\r\n   * ------------------------------\r\n   * DOM Element info\r\n   * ------------------------------\r\n   */\r\n// always returns a list of matching DOM elements, from a selector, a DOM element or an list of elements or even an array of selectors\r\nconst _get = {};\r\n_get.elements = (selector) => {\r\n  let arr = [];\r\n  if (_type.String(selector)) {\r\n    try {\r\n      selector = document.querySelectorAll(selector);\r\n    } catch (e) { // invalid selector\r\n      return arr;\r\n    }\r\n  }\r\n  if (_type(selector) === 'nodelist' || _type.Array(selector)) {\r\n    for (let i = 0, ref = arr.length = selector.length; i < ref; i++) { // list of elements\r\n      const elem = selector[i];\r\n      arr[i] = _type.DomElement(elem) ? elem : _get.elements(elem); // if not an element, try to resolve recursively\r\n    }\r\n  } else if (_type.DomElement(selector) || selector === document || selector === window) {\r\n    arr = [selector]; // only the element\r\n  }\r\n  return arr;\r\n};\r\n// get scroll top value\r\n_get.scrollTop = elem => ((elem && typeof elem.scrollTop === 'number') ? elem.scrollTop : window.pageYOffset || 0);\r\n// get scroll left value\r\n_get.scrollLeft = elem => ((elem && typeof elem.scrollLeft === 'number') ? elem.scrollLeft : window.pageXOffset || 0);\r\n// get element height\r\n_get.width = (elem, outer, includeMargin) => _dimension('width', elem, outer, includeMargin);\r\n// get element width\r\n_get.height = (elem, outer, includeMargin) => _dimension('height', elem, outer, includeMargin);\r\n\r\n// get element position (optionally relative to viewport)\r\n_get.offset = (elem, relativeToViewport) => {\r\n  const offset = { top: 0, left: 0 };\r\n  if (elem && elem.getBoundingClientRect) { // check if available\r\n    const rect = elem.getBoundingClientRect();\r\n    offset.top = rect.top;\r\n    offset.left = rect.left;\r\n    if (!relativeToViewport) { // clientRect is by default relative to viewport...\r\n      offset.top += _get.scrollTop();\r\n      offset.left += _get.scrollLeft();\r\n    }\r\n  }\r\n  return offset;\r\n};\r\nU.get = _get;\r\n\r\n/**\r\n   * ------------------------------\r\n   * DOM Element manipulation\r\n   * ------------------------------\r\n   */\r\n\r\nU.addClass = (elem, classname) => {\r\n  if (classname) {\r\n    if (elem.classList) { elem.classList.add(classname); } else { elem.className += ` ${classname}`; }\r\n  }\r\n};\r\n\r\nU.removeClass = (elem, classname) => {\r\n  if (classname) {\r\n    if (elem.classList) { elem.classList.remove(classname); } else { elem.className = elem.className.replace(new RegExp(`(^|\\\\b)${classname.split(' ').join('|')}(\\\\b|$)`, 'gi'), ' '); }\r\n  }\r\n};\r\n\r\n// if options is string -> returns css value\r\n// if options is array -> returns object with css value pairs\r\n// if options is object -> set new css values\r\nU.css = (elem, options) => {\r\n  if (_type.String(options)) {\r\n    return _getComputedStyle(elem)[_camelCase(options)];\r\n  } else if (_type.Array(options)) {\r\n    const obj = {};\r\n    const style = _getComputedStyle(elem);\r\n    options.forEach((option, key) => {\r\n      obj[option] = style[_camelCase(option)];\r\n    });\r\n    return obj;\r\n  }\r\n  for (const option in options) {\r\n    let val = options[option];\r\n    if (val === parseFloat(val)) { // assume pixel for seemingly numerical values\r\n      val += 'px';\r\n    }\r\n    elem.style[_camelCase(option)] = val;\r\n  }\r\n};\r\n\r\nexport default U;\r\n","class Event {\n  constructor(type, namespace, target, vars) {\n    vars = vars || {};\n    for (const key in vars) {\n      this[key] = vars[key];\n    }\n    this.type = type;\n    this.target = target;\n    this.currentTarget = target;\n    this.namespace = namespace || '';\n    this.timeStamp = Date.now();\n    this.timestamp = this.timeStamp;\n    return this;\n  }\n}\n\nexport default Event;\n","/* eslint-env browser */\n\nimport _util from './_util';\n\nconst FONT_SIZE = '0.85em';\nconst ZINDEX = '9999';\n\nconst TPL = {\n  start(color) {\n    // inner element (for bottom offset -1, while keeping top position 0)\n    const inner = document.createElement('div');\n    inner.textContent = 'start';\n    _util.css(inner, {\n      position: 'absolute',\n      overflow: 'visible',\n      'border-width': 0,\n      'border-style': 'solid',\n      color,\n      'border-color': color,\n    });\n    const element = document.createElement('div');\n    // wrapper\n    _util.css(element, {\n      position: 'absolute',\n      overflow: 'visible',\n      width: 0,\n      height: 0,\n    });\n    element.appendChild(inner);\n    return element;\n  },\n  end(color) {\n    const element = document.createElement('div');\n    element.textContent = 'end';\n    _util.css(element, {\n      position: 'absolute',\n      overflow: 'visible',\n      'border-width': 0,\n      'border-style': 'solid',\n      color,\n      'border-color': color,\n    });\n    return element;\n  },\n  bounds() {\n    const element = document.createElement('div');\n    _util.css(element, {\n      position: 'absolute',\n      overflow: 'visible',\n      'white-space': 'nowrap',\n      'pointer-events': 'none',\n      'font-size': FONT_SIZE,\n    });\n    element.style.zIndex = ZINDEX;\n    return element;\n  },\n  trigger(color) {\n    // inner to be above or below line but keep position\n    const inner = document.createElement('div');\n    inner.textContent = 'trigger';\n    _util.css(inner, {\n      position: 'relative',\n    });\n    // wrapper for right: 0 and main element has no size\n    const wrapper = document.createElement('div');\n    _util.css(wrapper, {\n      position: 'absolute',\n      overflow: 'visible',\n      'border-width': 0,\n      'border-style': 'solid',\n      color,\n      'border-color': color,\n    });\n    wrapper.appendChild(inner);\n    // element\n    const element = document.createElement('div');\n    _util.css(element, {\n      position: 'fixed',\n      overflow: 'visible',\n      'white-space': 'nowrap',\n      'pointer-events': 'none',\n      'font-size': FONT_SIZE,\n    });\n    element.style.zIndex = ZINDEX;\n    element.appendChild(wrapper);\n    return element;\n  },\n};\n\nlet _autoindex = 0;\n\nclass Indicator {\n  constructor(scene, options) {\n    options.name = options.name || _autoindex;\n\n    _autoindex++;\n\n    this._elemBounds = TPL.bounds();\n    this._elemStart = TPL.start(options.colorStart);\n    this._elemEnd = TPL.end(options.colorEnd);\n\n    this._boundsContainer = options.parent && _util.get.elements(options.parent)[0];\n\n    // prepare bounds elements\n    this._elemStart.firstChild.textContent += ` ${options.name}`;\n    this._elemEnd.textContent += ` ${options.name}`;\n    this._elemBounds.appendChild(this._elemStart);\n    this._elemBounds.appendChild(this._elemEnd);\n\n    this._vertical = null;\n    this._ctrl = null;\n\n    // set public variables\n    this.options = options;\n    this.bounds = this._elemBounds;\n    this.triggerGroup = undefined; // will be set later\n\n    this.scene = scene;\n  }\n\n  // add indicators to DOM\n  add() {\n    this._ctrl = this.scene.controller();\n    this._vertical = this._ctrl.info('vertical');\n\n    const isDocument = this._ctrl.info('isDocument');\n\n    if (!this._boundsContainer) {\n      // no parent supplied or doesnt exist\n      this._boundsContainer = isDocument ? document.body : this._ctrl.info('container'); // check if window/document (then use body)\n    }\n    if (!isDocument && _util.css(this._boundsContainer, 'position') === 'static') {\n      // position mode needed for correct positioning of indicators\n      _util.css(this._boundsContainer, { position: 'relative' });\n    }\n\n    // add listeners for updates\n    this.scene.on('change.plugin_addIndicators', this._handleTriggerParamsChange);\n    this.scene.on('shift.plugin_addIndicators', this._handleBoundsParamsChange);\n\n    // updates trigger & bounds (will add elements if needed)\n    this._updateTriggerGroup();\n    this._updateBounds();\n\n    setTimeout(() => { // do after all execution is finished otherwise sometimes size calculations are off\n      this._ctrl.updateBoundsPositions(this);\n    }, 0);\n\n    _util.log(3, 'added indicators');\n  }\n\n  // remove indicators from DOM\n  remove() {\n    if (this.triggerGroup) { // if not set there's nothing to remove\n      this.scene.off('change.plugin_addIndicators', this._handleTriggerParamsChange);\n      this.scene.off('shift.plugin_addIndicators', this._handleBoundsParamsChange);\n\n      if (this.triggerGroup.members.length > 1) {\n        // just remove from memberlist of old group\n        const group = this.triggerGroup;\n        group.members.splice(group.members.indexOf(this), 1);\n        this._ctrl._indicators.updateTriggerGroupLabel(group);\n        this._ctrl._indicators.updateTriggerGroupPositions(group);\n        this.triggerGroup = undefined;\n      } else {\n        // remove complete group\n        this._removeTriggerGroup();\n      }\n      this._removeBounds();\n\n      _util.log(3, 'removed indicators');\n    }\n  }\n\n  // event handler for when bounds params change\n  _handleBoundsParamsChange() {\n    this._updateBounds();\n  }\n\n  // event handler for when trigger params change\n  _handleTriggerParamsChange(event) {\n    if (event.what === 'triggerHook') {\n      this._updateTriggerGroup();\n    }\n  }\n\n  // adds an new bounds elements to the array and to the DOM\n  _addBounds() {\n    const v = this._ctrl.info('vertical');\n    // apply stuff we didn't know before...\n    _util.css(this._elemStart.firstChild, {\n      'border-bottom-width': v ? 1 : 0,\n      'border-right-width': v ? 0 : 1,\n      bottom: v ? -1 : this.options.indent,\n      right: v ? this.options.indent : -1,\n      padding: v ? '0 8px' : '2px 4px',\n    });\n    _util.css(this._elemEnd, {\n      'border-top-width': v ? 1 : 0,\n      'border-left-width': v ? 0 : 1,\n      top: v ? '100%' : '',\n      right: v ? this.options.indent : '',\n      bottom: v ? '' : this.options.indent,\n      left: v ? '' : '100%',\n      padding: v ? '0 8px' : '2px 4px',\n    });\n    // append\n    this._boundsContainer.appendChild(this._elemBounds);\n  }\n\n  // remove bounds from list and DOM\n  _removeBounds() {\n    this._elemBounds.parentNode.removeChild(this._elemBounds);\n  }\n\n  // update the start and end positions of the scene\n  _updateBounds() {\n    if (this._elemBounds.parentNode !== this._boundsContainer) {\n      this._addBounds(); // Add Bounds elements (start/end)\n    }\n    const css = {};\n    css[this._vertical ? 'top' : 'left'] = this.scene.triggerPosition();\n    css[this._vertical ? 'height' : 'width'] = this.scene.duration();\n    _util.css(this._elemBounds, css);\n    _util.css(this._elemEnd, {\n      display: this.scene.duration() > 0 ? '' : 'none',\n    });\n  }\n\n  // adds an new trigger group to the array and to the DOM\n  _addTriggerGroup() {\n    const triggerElem = TPL.trigger(this.options.colorTrigger); // new trigger element\n    const css = {};\n    css[this._vertical ? 'right' : 'bottom'] = 0;\n    css[this._vertical ? 'border-top-width' : 'border-left-width'] = 1;\n    _util.css(triggerElem.firstChild, css);\n    _util.css(triggerElem.firstChild.firstChild, {\n      padding: this._vertical ? '0 8px 3px 8px' : '3px 4px',\n    });\n    document.body.appendChild(triggerElem); // directly add to body\n    const newGroup = {\n      triggerHook: this.scene.triggerHook(),\n      element: triggerElem,\n      members: [this],\n    };\n    this._ctrl._indicators.groups.push(newGroup);\n    this.triggerGroup = newGroup;\n    // update right away\n    this._ctrl.updateTriggerGroupLabel(newGroup);\n    this._ctrl.updateTriggerGroupPositions(newGroup);\n  }\n\n  _removeTriggerGroup() {\n    this._ctrl._indicators.groups.splice(this._ctrl._indicators.groups.indexOf(this.triggerGroup), 1);\n    this.triggerGroup.element.parentNode.removeChild(this.triggerGroup.element);\n    this.triggerGroup = undefined;\n  }\n\n  // updates the trigger group -> either join existing or add new one\n  _updateTriggerGroup() {\n    const triggerHook = this.scene.triggerHook();\n    const closeEnough = 0.0001;\n\n    // Have a group, check if it still matches\n    if (this.triggerGroup) {\n      if (Math.abs(this.triggerGroup.triggerHook - triggerHook) < closeEnough) {\n        // _util.log(0, \"trigger\", options.name, \"->\", \"no need to change, still in sync\");\n        return; // all good\n      }\n    }\n\n    // Don't have a group, check if a matching one exists\n    // _util.log(0, \"trigger\", options.name, \"->\", \"out of sync!\");\n    const groups = this._ctrl._indicators.groups;\n    let group;\n    let i = groups.length;\n\n    while (i--) {\n      group = groups[i];\n      if (Math.abs(group.triggerHook - triggerHook) < closeEnough) {\n        // found a match!\n        // _util.log(0, \"trigger\", options.name, \"->\", \"found match\");\n        if (this.triggerGroup) { // do I have an old group that is out of sync?\n          if (this.triggerGroup.members.length === 1) { // is it the only remaining group?\n            // _util.log(0, \"trigger\", options.name, \"->\", \"kill\");\n            // was the last member, remove the whole group\n            this._removeTriggerGroup();\n          } else {\n            this.triggerGroup.members.splice(this.triggerGroup.members.indexOf(this), 1); // just remove from memberlist of old group\n            this._ctrl._indicators.updateTriggerGroupLabel(this.triggerGroup);\n            this._ctrl._indicators.updateTriggerGroupPositions(this.triggerGroup);\n            // _util.log(0, \"trigger\", options.name, \"->\", \"removing from previous member list\");\n          }\n        }\n        // join new group\n        group.members.push(this);\n        this.triggerGroup = group;\n        this._ctrl._indicators.updateTriggerGroupLabel(group);\n        return;\n      }\n    }\n\n    // at this point I am obviously out of sync and don't match any other group\n    if (this.triggerGroup) {\n      if (this.triggerGroup.members.length === 1) {\n        // _util.log(0, \"trigger\", options.name, \"->\", \"updating existing\");\n        // out of sync but i'm the only member => just change and update\n        this.triggerGroup.triggerHook = triggerHook;\n        this._ctrl._indicators.updateTriggerGroupPositions(this.triggerGroup);\n        return;\n      }\n      // _util.log(0, \"trigger\", options.name, \"->\", \"removing from previous member list\");\n      this.triggerGroup.members.splice(this.triggerGroup.members.indexOf(this), 1); // just remove from memberlist of old group\n      this._ctrl._indicators.updateTriggerGroupLabel(this.triggerGroup);\n      this._ctrl._indicators.updateTriggerGroupPositions(this.triggerGroup);\n      this.triggerGroup = undefined; // need a brand new group...\n    }\n    // _util.log(0, \"trigger\", options.name, \"->\", \"add a new one\");\n    // did not find any match, make new trigger group\n    this._addTriggerGroup();\n  }\n}\n\nexport default Indicator;\n","/* eslint-env browser */\r\n\r\nimport _util from './_util';\r\nimport Event from './Event';\r\nimport Indicator from './Indicator';\r\n\r\nconst PIN_SPACER_ATTRIBUTE = 'data-scrollmagic-pin-spacer';\r\n\r\nconst NAMESPACE = 'ScrollWizardry.Scene';\r\n\r\nconst SCENE_STATE_BEFORE = 'BEFORE';\r\nconst SCENE_STATE_DURING = 'DURING';\r\nconst SCENE_STATE_AFTER = 'AFTER';\r\n\r\nlet _state = SCENE_STATE_BEFORE;\r\nlet _progress = 0;\r\nlet _scrollOffset = { start: 0, end: 0 };\r\nlet _triggerPos = 0;\r\nlet _durationUpdateMethod;\r\nlet _controller;\r\nconst _listeners = {};\r\n\r\nlet _pin;\r\nlet _pinOptions;\r\n\r\nlet _cssClasses;\r\nlet _cssClassElems = [];\r\n\r\nlet _tween;\r\n\r\nlet _indicator;\r\nconst _autoindex = 0;\r\n\r\nconst DEFAULT_INDICATOR_OPTIONS = {\r\n  name: '',\r\n  indent: 0,\r\n  parent: undefined,\r\n  colorStart: 'green',\r\n  colorEnd: 'red',\r\n  colorTrigger: 'blue',\r\n};\r\n\r\nconst SCENE_OPTIONS = {\r\n  defaults: {\r\n    duration: 0,\r\n    offset: 0,\r\n    triggerElement: undefined,\r\n    triggerHook: 0.5,\r\n    reverse: true,\r\n    loglevel: 2,\r\n    tweenChanges: false,\r\n  },\r\n  validate: {\r\n    duration(val) {\r\n      if (_util.type.String(val) && val.match(/^(\\.|\\d)*\\d+%$/)) {\r\n        // percentage value\r\n        const perc = parseFloat(val) / 100;\r\n        val = function () {\r\n          return _controller ? _controller.info('size') * perc : 0;\r\n        };\r\n      }\r\n      if (_util.type.Function(val)) {\r\n        // function\r\n        _durationUpdateMethod = val;\r\n        try {\r\n          val = parseFloat(_durationUpdateMethod());\r\n        } catch (e) {\r\n          val = -1; // will cause error below\r\n        }\r\n      }\r\n      // val has to be float\r\n      val = parseFloat(val);\r\n      if (!_util.type.Number(val) || val < 0) {\r\n        if (_durationUpdateMethod) {\r\n          _durationUpdateMethod = undefined;\r\n          throw Error(`Invalid return value of supplied function for option \"duration\": ${val}`);\r\n        } else {\r\n          throw Error(`Invalid value for option \"duration\": ${val}`);\r\n        }\r\n      }\r\n      return val;\r\n    },\r\n    offset(val) {\r\n      val = parseFloat(val);\r\n      if (!_util.type.Number(val)) {\r\n        throw Error(`Invalid value for option \"offset\": ${val}`);\r\n      }\r\n      return val;\r\n    },\r\n    triggerElement(val) {\r\n      val = val || undefined;\r\n      if (val) {\r\n        const elem = _util.get.elements(val)[0];\r\n        if (elem && elem.parentNode) {\r\n          val = elem;\r\n        } else {\r\n          throw Error(`Element defined in option \"triggerElement\" was not found: ${val}`);\r\n        }\r\n      }\r\n      return val;\r\n    },\r\n    triggerHook(val) {\r\n      const translate = { onCenter: 0.5, onEnter: 1, onLeave: 0 };\r\n      if (_util.type.Number(val)) {\r\n        val = Math.max(0, Math.min(parseFloat(val), 1)); //  make sure its betweeen 0 and 1\r\n      } else if (val in translate) {\r\n        val = translate[val];\r\n      } else {\r\n        throw Error(`Invalid value for option \"triggerHook\": ${val}`);\r\n      }\r\n      return val;\r\n    },\r\n    reverse(val) {\r\n      return !!val; // force boolean\r\n    },\r\n    loglevel(val) {\r\n      val = parseInt(val, 10);\r\n      if (!_util.type.Number(val) || val < 0 || val > 3) {\r\n        throw Error(`Invalid value for option \"loglevel\": ${val}`);\r\n      }\r\n      return val;\r\n    },\r\n    tweenChanges(val) {\r\n      return !!val;\r\n    },\r\n  },\r\n  // list of options that trigger a `shift` event\r\n  shifts: ['duration', 'offset', 'triggerHook'],\r\n};\r\n\r\nconst DEFAULT_OPTIONS = SCENE_OPTIONS.defaults;\r\n\r\nclass Scene {\r\n  constructor(options) {\r\n    this.options = _util.extend({}, DEFAULT_OPTIONS, options);\r\n\r\n    // add getters/setters for all possible options\r\n    for (const optionName in DEFAULT_OPTIONS) {\r\n      this._addSceneOption(optionName);\r\n    }\r\n\r\n    // validate all options\r\n    this._validateOption();\r\n\r\n    this.on('change.internal', (event) => {\r\n      if (event.what !== 'loglevel' && event.what !== 'tweenChanges') { // no need for a scene update scene with these options...\r\n        if (event.what === 'triggerElement') {\r\n          this._updateTriggerElementPosition();\r\n        } else if (event.what === 'reverse') { // the only property left that may have an impact on the current scene state. Everything else is handled by the shift event.\r\n          this.update();\r\n        }\r\n      }\r\n    });\r\n\r\n    this.on('shift.internal', (event) => {\r\n      this._updateScrollOffset();\r\n      this.update(); // update scene to reflect new position\r\n    });\r\n\r\n    // pinning\r\n\r\n    this.on('shift.internal', (event) => {\r\n      const durationChanged = event.reason === 'duration';\r\n      if ((_state === SCENE_STATE_AFTER && durationChanged) || (_state === SCENE_STATE_DURING && this.options.duration === 0)) {\r\n        // if [duration changed after a scene (inside scene progress updates pin position)] or [duration is 0, we are in pin phase and some other value changed].\r\n        this._updatePinState();\r\n      }\r\n      if (durationChanged) {\r\n        this._updatePinDimensions();\r\n      }\r\n    });\r\n\r\n    this.on('progress.internal', (event) => {\r\n      this._updatePinState();\r\n    });\r\n\r\n    this.on('add.internal', (event) => {\r\n      this._updatePinDimensions();\r\n    });\r\n\r\n    this.on('destroy.internal', (event) => {\r\n      this.removePin(event.reset);\r\n    });\r\n\r\n    // class toggle\r\n\r\n    this.on('destroy.internal', (event) => {\r\n      this.removeClassToggle(event.reset);\r\n    });\r\n\r\n    // gsap\r\n\r\n    this.on('progress.plugin_gsap', () => {\r\n      this._updateTweenProgress();\r\n    });\r\n\r\n    this.on('destroy.plugin_gsap', (event) => {\r\n      this.removeTween(event.reset);\r\n    });\r\n  }\r\n\r\n  on(names, callback) {\r\n    if (_util.type.Function(callback)) {\r\n      names = names.trim().split(' ');\r\n      names.forEach((fullname) => {\r\n        const nameparts = fullname.split('.');\r\n        const eventname = nameparts[0];\r\n        const namespace = nameparts[1];\r\n        if (eventname !== '*') { // disallow wildcards\r\n          if (!_listeners[eventname]) {\r\n            _listeners[eventname] = [];\r\n          }\r\n          _listeners[eventname].push({\r\n            namespace: namespace || '',\r\n            callback,\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      _util.log(1, `ERROR when calling '.on()': Supplied callback for '${names}' is not a valid function!`);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  off(names, callback) {\r\n    if (!names) {\r\n      _util.log(1, 'ERROR: Invalid event name supplied.');\r\n      return this;\r\n    }\r\n    names = names.trim().split(' ');\r\n    names.forEach((fullname, key) => {\r\n      const nameparts = fullname.split('.');\r\n      const eventname = nameparts[0];\r\n      const namespace = nameparts[1] || '';\r\n      const removeList = eventname === '*' ? Object.keys(_listeners) : [eventname];\r\n      removeList.forEach((remove) => {\r\n        const list = _listeners[remove] || [];\r\n        let i = list.length;\r\n        while (i--) {\r\n          const listener = list[i];\r\n          if (listener && (namespace === listener.namespace || namespace === '*') && (!callback || callback === listener.callback)) {\r\n            list.splice(i, 1);\r\n          }\r\n        }\r\n        if (!list.length) {\r\n          delete _listeners[remove];\r\n        }\r\n      });\r\n    });\r\n    return this;\r\n  }\r\n\r\n  trigger(name, vars) {\r\n    if (name) {\r\n      const nameparts = name.trim().split('.');\r\n      const eventname = nameparts[0];\r\n      const namespace = nameparts[1];\r\n      const listeners = _listeners[eventname];\r\n      _util.log(3, 'event fired:', eventname, vars ? '->' : '', vars || '');\r\n      if (listeners) {\r\n        listeners.forEach((listener, key) => {\r\n          if (!namespace || namespace === listener.namespace) {\r\n            listener.callback.call(this, new Event(eventname, listener.namespace, this, vars));\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      _util.log(1, 'ERROR: Invalid event name supplied.');\r\n    }\r\n    return this;\r\n  }\r\n\r\n  addTo(controller) {\r\n    if (_controller !== controller) {\r\n      // new controller\r\n      if (_controller) { // was associated to a different controller before, so remove it...\r\n        _controller.removeScene(this);\r\n      }\r\n      _controller = controller;\r\n      this._validateOption();\r\n      this._updateDuration(true);\r\n      this._updateTriggerElementPosition(true);\r\n      this._updateScrollOffset();\r\n      _controller.info('container').addEventListener('resize', this._onContainerResize);\r\n      controller.addScene(this);\r\n      this.trigger('add', { controller: _controller });\r\n      _util.log(3, `added ${NAMESPACE} to controller`);\r\n      this.update();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  remove() {\r\n    if (_controller) {\r\n      _controller.info('container').removeEventListener('resize', this._onContainerResize);\r\n      const tmpParent = _controller;\r\n      _controller = undefined;\r\n      tmpParent.removeScene(this);\r\n      this.trigger('remove');\r\n      _util.log(3, `removed ${NAMESPACE} from controller`);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  destroy(reset) {\r\n    this.trigger('destroy', { reset });\r\n    this.remove();\r\n    this.off('*.*');\r\n    _util.log(3, `destroyed ${NAMESPACE} (reset: ${reset ? 'true' : 'false'})`);\r\n    return null;\r\n  }\r\n\r\n  update(immediately) {\r\n    if (_controller) {\r\n      if (immediately) {\r\n        if (_controller.enabled()) {\r\n          const scrollPos = _controller.info('scrollPos');\r\n          let newProgress;\r\n\r\n          if (this.options.duration > 0) {\r\n            newProgress = (scrollPos - _scrollOffset.start) / (_scrollOffset.end - _scrollOffset.start);\r\n          } else {\r\n            newProgress = scrollPos >= _scrollOffset.start ? 1 : 0;\r\n          }\r\n\r\n          this.trigger('update', { startPos: _scrollOffset.start, endPos: _scrollOffset.end, scrollPos });\r\n\r\n          this.progress(newProgress);\r\n        } else if (_pin && _state === SCENE_STATE_DURING) {\r\n          this._updatePinState(true); // unpin in position\r\n        }\r\n      } else {\r\n        _controller.updateScene(this, false);\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  refresh() {\r\n    this._updateDuration();\r\n    this._updateTriggerElementPosition();\r\n    // update trigger element position\r\n    return this;\r\n  }\r\n\r\n  progress(progress) {\r\n    if (!arguments.length) { // get\r\n      return _progress;\r\n    } // set\r\n\r\n    let doUpdate = false;\r\n    const oldState = _state;\r\n    const scrollDirection = _controller ? _controller.info('scrollDirection') : 'PAUSED';\r\n    const reverseOrForward = this.options.reverse || progress >= _progress;\r\n    if (this.options.duration === 0) {\r\n      // zero duration scenes\r\n      doUpdate = _progress !== progress;\r\n      _progress = progress < 1 && reverseOrForward ? 0 : 1;\r\n      _state = _progress === 0 ? SCENE_STATE_BEFORE : SCENE_STATE_DURING;\r\n    } else {\r\n      // scenes with start and end\r\n      if (progress < 0 && _state !== SCENE_STATE_BEFORE && reverseOrForward) {\r\n        // go back to initial state\r\n        _progress = 0;\r\n        _state = SCENE_STATE_BEFORE;\r\n        doUpdate = true;\r\n      } else if (progress >= 0 && progress < 1 && reverseOrForward) {\r\n        _progress = progress;\r\n        _state = SCENE_STATE_DURING;\r\n        doUpdate = true;\r\n      } else if (progress >= 1 && _state !== SCENE_STATE_AFTER) {\r\n        _progress = 1;\r\n        _state = SCENE_STATE_AFTER;\r\n        doUpdate = true;\r\n      } else if (_state === SCENE_STATE_DURING && !reverseOrForward) {\r\n        this._updatePinState(); // in case we scrolled backwards mid-scene and reverse is disabled => update the pin position, so it doesn't move back as well.\r\n      }\r\n    }\r\n    if (doUpdate) {\r\n      // fire events\r\n      const eventVars = { progress: _progress, state: _state, scrollDirection };\r\n      const stateChanged = _state !== oldState;\r\n\r\n      const trigger = (eventName) => { // tmp helper to simplify code\r\n        this.trigger(eventName, eventVars);\r\n      };\r\n\r\n      if (stateChanged) { // enter events\r\n        if (oldState !== SCENE_STATE_DURING) {\r\n          trigger('enter');\r\n          trigger(oldState === SCENE_STATE_BEFORE ? 'start' : 'end');\r\n        }\r\n      }\r\n      trigger('progress');\r\n      if (stateChanged) { // leave events\r\n        if (_state !== SCENE_STATE_DURING) {\r\n          trigger(_state === SCENE_STATE_BEFORE ? 'start' : 'end');\r\n          trigger('leave');\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  _updateScrollOffset() {\r\n    _scrollOffset = { start: _triggerPos + this.options.offset };\r\n    if (_controller && this.options.triggerElement) {\r\n      // take away triggerHook portion to get relative to top\r\n      _scrollOffset.start -= _controller.info('size') * this.options.triggerHook;\r\n    }\r\n    _scrollOffset.end = _scrollOffset.start + this.options.duration;\r\n  }\r\n\r\n  _updateDuration(suppressEvents) {\r\n    // update duration\r\n    if (_durationUpdateMethod) {\r\n      const varname = 'duration';\r\n      if (this._changeOption(varname, _durationUpdateMethod.call(this)) && !suppressEvents) { // set\r\n        this.trigger('change', { what: varname, newval: this.options[varname] });\r\n        this.trigger('shift', { reason: varname });\r\n      }\r\n    }\r\n  }\r\n\r\n  _updateTriggerElementPosition(suppressEvents) {\r\n    let elementPos = 0;\r\n    let telem = this.options.triggerElement;\r\n    if (_controller && (telem || _triggerPos > 0)) { // either an element exists or was removed and the triggerPos is still > 0\r\n      if (telem) { // there currently a triggerElement set\r\n        if (telem.parentNode) { // check if element is still attached to DOM\r\n          const controllerInfo = _controller.info();\r\n          const containerOffset = _util.get.offset(controllerInfo.container); // container position is needed because element offset is returned in relation to document, not in relation to container.\r\n          const param = controllerInfo.vertical ? 'top' : 'left'; // which param is of interest ?\r\n\r\n          // if parent is spacer, use spacer position instead so correct start position is returned for pinned elements.\r\n          while (telem.parentNode.hasAttribute(PIN_SPACER_ATTRIBUTE)) {\r\n            telem = telem.parentNode;\r\n          }\r\n\r\n          const elementOffset = _util.get.offset(telem);\r\n\r\n          if (!controllerInfo.isDocument) { // container is not the document root, so substract scroll Position to get correct trigger element position relative to scrollcontent\r\n            containerOffset[param] -= _controller.scrollPos();\r\n          }\r\n\r\n          elementPos = elementOffset[param] - containerOffset[param];\r\n        } else { // there was an element, but it was removed from DOM\r\n          _util.log(2, 'WARNING: triggerElement was removed from DOM and will be reset to', undefined);\r\n          this.triggerElement(undefined); // unset, so a change event is triggered\r\n        }\r\n      }\r\n\r\n      const changed = elementPos !== _triggerPos;\r\n      _triggerPos = elementPos;\r\n      if (changed && !suppressEvents) {\r\n        this.trigger('shift', { reason: 'triggerElementPosition' });\r\n      }\r\n    }\r\n  }\r\n\r\n  _onContainerResize(event) {\r\n    if (this.options.triggerHook > 0) {\r\n      this.trigger('shift', { reason: 'containerResize' });\r\n    }\r\n  }\r\n\r\n  _validateOption(check) {\r\n    check = arguments.length ? [check] : Object.keys(SCENE_OPTIONS.validate);\r\n    check.forEach((optionName, key) => {\r\n      let value;\r\n      if (SCENE_OPTIONS.validate[optionName]) { // there is a validation method for this option\r\n        try { // validate value\r\n          value = SCENE_OPTIONS.validate[optionName](this.options[optionName]);\r\n        } catch (event) { // validation failed -> reset to default\r\n          value = DEFAULT_OPTIONS[optionName];\r\n          const logMSG = _util.type.String(event) ? [event] : event;\r\n          if (_util.type.Array(logMSG)) {\r\n            logMSG[0] = `ERROR: ${logMSG[0]}`;\r\n            logMSG.unshift(1); // loglevel 1 for error msg\r\n            _util.log.apply(this, logMSG);\r\n          } else {\r\n            _util.log(1, `ERROR: Problem executing validation callback for option '${optionName}':`, event.message);\r\n          }\r\n        } finally {\r\n          this.options[optionName] = value;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  _changeOption(varname, newval) {\r\n    let changed = false;\r\n    const oldval = this.options[varname];\r\n    if (this.options[varname] !== newval) {\r\n      this.options[varname] = newval;\r\n      this._validateOption(varname); // resets to default if necessary\r\n      changed = oldval !== this.options[varname];\r\n    }\r\n    return changed;\r\n  }\r\n\r\n  _addSceneOption(optionName) {\r\n    if (!this[optionName]) {\r\n      this[optionName] = function (newVal) {\r\n        if (!arguments.length) { // get\r\n          return this.options[optionName];\r\n        }\r\n        if (optionName === 'duration') { // new duration is set, so any previously set function must be unset\r\n          _durationUpdateMethod = undefined;\r\n        }\r\n        if (this._changeOption(optionName, newVal)) { // set\r\n          this.trigger('change', { what: optionName, newval: this.options[optionName] });\r\n          if (SCENE_OPTIONS.shifts.indexOf(optionName) > -1) {\r\n            this.trigger('shift', { reason: optionName });\r\n          }\r\n        }\r\n\r\n        return this;\r\n      };\r\n    }\r\n  }\r\n\r\n  controller() {\r\n    return _controller;\r\n  }\r\n\r\n  state() {\r\n    return _state;\r\n  }\r\n\r\n  scrollOffset() {\r\n    return _scrollOffset.start;\r\n  }\r\n\r\n  triggerPosition() {\r\n    let pos = this.options.offset; // the offset is the basis\r\n    if (_controller) {\r\n      // get the trigger position\r\n      if (this.options.triggerElement) {\r\n        // Element as trigger\r\n        pos += _triggerPos;\r\n      } else {\r\n        // return the height of the triggerHook to start at the beginning\r\n        pos += _controller.info('size') * this.triggerHook();\r\n      }\r\n    }\r\n    return pos;\r\n  }\r\n\r\n  // pinning\r\n\r\n  _updatePinState(forceUnpin) {\r\n    if (_pin && _controller) {\r\n      const containerInfo = _controller.info();\r\n      const pinTarget = _pinOptions.spacer.firstChild; // may be pin element or another spacer, if cascading pins\r\n\r\n      if (!forceUnpin && _state === SCENE_STATE_DURING) { // during scene or if duration is 0 and we are past the trigger\r\n        // pinned state\r\n        if (_util.css(pinTarget, 'position') !== 'fixed') {\r\n          // change state before updating pin spacer (position changes due to fixed collapsing might occur.)\r\n          _util.css(pinTarget, { position: 'fixed' });\r\n          // update pin spacer\r\n          this._updatePinDimensions();\r\n        }\r\n\r\n        const fixedPos = _util.get.offset(_pinOptions.spacer, true); // get viewport position of spacer\r\n        const scrollDistance = this.options.reverse || this.options.duration === 0 ?\r\n          containerInfo.scrollPos - _scrollOffset.start // quicker\r\n          : Math.round(_progress * this.options.duration * 10) / 10; // if no reverse and during pin the position needs to be recalculated using the progress\r\n\r\n        // add scrollDistance\r\n        fixedPos[containerInfo.vertical ? 'top' : 'left'] += scrollDistance;\r\n\r\n        // set new values\r\n        _util.css(_pinOptions.spacer.firstChild, {\r\n          top: fixedPos.top,\r\n          left: fixedPos.left,\r\n        });\r\n      } else {\r\n        // unpinned state\r\n        const newCSS = {\r\n          position: _pinOptions.inFlow ? 'relative' : 'absolute',\r\n          top: 0,\r\n          left: 0,\r\n        };\r\n        let change = _util.css(pinTarget, 'position') !== newCSS.position;\r\n\r\n        if (!_pinOptions.pushFollowers) {\r\n          newCSS[containerInfo.vertical ? 'top' : 'left'] = this.options.duration * _progress;\r\n        } else if (this.options.duration > 0) { // only concerns scenes with duration\r\n          if (_state === SCENE_STATE_AFTER && parseFloat(_util.css(_pinOptions.spacer, 'padding-top')) === 0) {\r\n            change = true; // if in after state but havent updated spacer yet (jumped past pin)\r\n          } else if (_state === SCENE_STATE_BEFORE && parseFloat(_util.css(_pinOptions.spacer, 'padding-bottom')) === 0) { // before\r\n            change = true; // jumped past fixed state upward direction\r\n          }\r\n        }\r\n        // set new values\r\n        _util.css(pinTarget, newCSS);\r\n        if (change) {\r\n          // update pin spacer if state changed\r\n          this._updatePinDimensions();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _updatePinDimensions() {\r\n    if (_pin && _controller && _pinOptions.inFlow) { // no spacerresize, if original position is absolute\r\n      const after = (_state === SCENE_STATE_AFTER);\r\n      const before = (_state === SCENE_STATE_BEFORE);\r\n      const during = (_state === SCENE_STATE_DURING);\r\n      const vertical = _controller.info('vertical');\r\n      const pinTarget = _pinOptions.spacer.firstChild; // usually the pined element but can also be another spacer (cascaded pins)\r\n      const marginCollapse = _util.isMarginCollapseType(_util.css(_pinOptions.spacer, 'display'));\r\n      const css = {};\r\n\r\n      // set new size\r\n      // if relsize: spacer -> pin | else: pin -> spacer\r\n      if (_pinOptions.relSize.width || _pinOptions.relSize.autoFullWidth) {\r\n        if (during) {\r\n          _util.css(_pin, { width: _util.get.width(_pinOptions.spacer) });\r\n        } else {\r\n          _util.css(_pin, { width: '100%' });\r\n        }\r\n      } else {\r\n        // minwidth is needed for cascaded pins.\r\n        css['min-width'] = _util.get.width(vertical ? _pin : pinTarget, true, true);\r\n        css.width = during ? css['min-width'] : 'auto';\r\n      }\r\n      if (_pinOptions.relSize.height) {\r\n        if (during) {\r\n          // the only padding the spacer should ever include is the duration (if pushFollowers = true), so we need to substract that.\r\n          _util.css(_pin, { height: _util.get.height(_pinOptions.spacer) - (_pinOptions.pushFollowers ? this.options.duration : 0) });\r\n        } else {\r\n          _util.css(_pin, { height: '100%' });\r\n        }\r\n      } else {\r\n        // margin is only included if it's a cascaded pin to resolve an IE9 bug\r\n        css['min-height'] = _util.get.height(vertical ? pinTarget : _pin, true, !marginCollapse); // needed for cascading pins\r\n        css.height = during ? css['min-height'] : 'auto';\r\n      }\r\n\r\n      // add space for duration if pushFollowers is true\r\n      if (_pinOptions.pushFollowers) {\r\n        css[`padding${vertical ? 'Top' : 'Left'}`] = this.options.duration * _progress;\r\n        css[`padding${vertical ? 'Bottom' : 'Right'}`] = this.options.duration * (1 - _progress);\r\n      }\r\n      _util.css(_pinOptions.spacer, css);\r\n    }\r\n  }\r\n\r\n  _updatePinInContainer() {\r\n    if (_controller && _pin && _state === SCENE_STATE_DURING && !_controller.info('isDocument')) {\r\n      this._updatePinState();\r\n    }\r\n  }\r\n\r\n  _updateRelativePinSpacer() {\r\n    if (_controller && _pin &&\r\n      _state === SCENE_STATE_DURING && // element in pinned state?\r\n      ( // is width or height relatively sized, but not in relation to body? then we need to recalc.\r\n        ((_pinOptions.relSize.width || _pinOptions.relSize.autoFullWidth) && _util.get.width(window) !== _util.get.width(_pinOptions.spacer.parentNode)) ||\r\n        (_pinOptions.relSize.height && _util.get.height(window) !== _util.get.height(_pinOptions.spacer.parentNode))\r\n      )\r\n    ) {\r\n      this._updatePinDimensions();\r\n    }\r\n  }\r\n\r\n  _onMousewheelOverPin(event) {\r\n    if (_controller && _pin && _state === SCENE_STATE_DURING && !_controller.info('isDocument')) { // in pin state\r\n      event.preventDefault();\r\n      _controller._setScrollPos(_controller.info('scrollPos') - ((event.wheelDelta || event[_controller.info('vertical') ? 'wheelDeltaY' : 'wheelDeltaX']) / 3 || -event.detail * 30));\r\n    }\r\n  }\r\n\r\n  setPin(element, settings) {\r\n    const defaultSettings = {\r\n      pushFollowers: true,\r\n      spacerClass: 'scrollmagic-pin-spacer',\r\n    };\r\n    settings = _util.extend({}, defaultSettings, settings);\r\n\r\n    // validate Element\r\n    element = _util.get.elements(element)[0];\r\n    if (!element) {\r\n      _util.log(1, \"ERROR calling method 'setPin()': Invalid pin element supplied.\");\r\n      return this; // cancel\r\n    } else if (_util.css(element, 'position') === 'fixed') {\r\n      _util.log(1, \"ERROR calling method 'setPin()': Pin does not work with elements that are positioned 'fixed'.\");\r\n      return this; // cancel\r\n    }\r\n\r\n    if (_pin) { // preexisting pin?\r\n      if (_pin === element) {\r\n        // same pin we already have -> do nothing\r\n        return this; // cancel\r\n      }\r\n      // kill old pin\r\n      this.removePin();\r\n    }\r\n    _pin = element;\r\n\r\n    const parentDisplay = _pin.parentNode.style.display;\r\n    const boundsParams = ['top', 'left', 'bottom', 'right', 'margin', 'marginLeft', 'marginRight', 'marginTop', 'marginBottom'];\r\n\r\n    _pin.parentNode.style.display = 'none'; // hack start to force css to return stylesheet values instead of calculated px values.\r\n\r\n    const inFlow = _util.css(_pin, 'position') !== 'absolute';\r\n    const pinCSS = _util.css(_pin, boundsParams.concat(['display']));\r\n    const sizeCSS = _util.css(_pin, ['width', 'height']);\r\n    _pin.parentNode.style.display = parentDisplay; // hack end.\r\n\r\n    if (!inFlow && settings.pushFollowers) {\r\n      _util.log(2, 'WARNING: If the pinned element is positioned absolutely pushFollowers will be disabled.');\r\n      settings.pushFollowers = false;\r\n    }\r\n\r\n    // wait until all finished, because with responsive duration it will only be set after scene is added to controller\r\n    window.setTimeout(() => {\r\n      if (_pin && this.options.duration === 0 && settings.pushFollowers) {\r\n        _util.log(2, 'WARNING: pushFollowers =', true, 'has no effect, when scene duration is 0.');\r\n      }\r\n    }, 0);\r\n\r\n    // create spacer and insert\r\n    const spacer = _pin.parentNode.insertBefore(document.createElement('div'), _pin);\r\n    const spacerCSS = _util.extend(pinCSS, {\r\n      position: inFlow ? 'relative' : 'absolute',\r\n      boxSizing: 'content-box',\r\n      mozBoxSizing: 'content-box',\r\n      webkitBoxSizing: 'content-box',\r\n    });\r\n\r\n    if (!inFlow) { // copy size if positioned absolutely, to work for bottom/right positioned elements.\r\n      _util.extend(spacerCSS, _util.css(_pin, ['width', 'height']));\r\n    }\r\n\r\n    _util.css(spacer, spacerCSS);\r\n    spacer.setAttribute(PIN_SPACER_ATTRIBUTE, '');\r\n    _util.addClass(spacer, settings.spacerClass);\r\n\r\n    // set the pin Options\r\n    _pinOptions = {\r\n      spacer,\r\n      relSize: { // save if size is defined using % values. if so, handle spacer resize differently...\r\n        width: sizeCSS.width.slice(-1) === '%',\r\n        height: sizeCSS.height.slice(-1) === '%',\r\n        autoFullWidth: sizeCSS.width === 'auto' && inFlow && _util.isMarginCollapseType(pinCSS.display),\r\n      },\r\n      pushFollowers: settings.pushFollowers,\r\n      inFlow, // stores if the element takes up space in the document flow\r\n    };\r\n\r\n    if (!_pin.___origStyle) {\r\n      _pin.___origStyle = {};\r\n      const pinInlineCSS = _pin.style;\r\n      const copyStyles = boundsParams.concat(['width', 'height', 'position', 'boxSizing', 'mozBoxSizing', 'webkitBoxSizing']);\r\n      copyStyles.forEach((val) => {\r\n        _pin.___origStyle[val] = pinInlineCSS[val] || '';\r\n      });\r\n    }\r\n\r\n    // if relative size, transfer it to spacer and make pin calculate it...\r\n    if (_pinOptions.relSize.width) {\r\n      _util.css(spacer, { width: sizeCSS.width });\r\n    }\r\n    if (_pinOptions.relSize.height) {\r\n      _util.css(spacer, { height: sizeCSS.height });\r\n    }\r\n\r\n    // now place the pin element inside the spacer\r\n    spacer.appendChild(_pin);\r\n    // and set new css\r\n    _util.css(_pin, {\r\n      position: inFlow ? 'relative' : 'absolute',\r\n      margin: 'auto',\r\n      top: 'auto',\r\n      left: 'auto',\r\n      bottom: 'auto',\r\n      right: 'auto',\r\n    });\r\n\r\n    if (_pinOptions.relSize.width || _pinOptions.relSize.autoFullWidth) {\r\n      _util.css(_pin, {\r\n        boxSizing: 'border-box',\r\n        mozBoxSizing: 'border-box',\r\n        webkitBoxSizing: 'border-box',\r\n      });\r\n    }\r\n\r\n    // add listener to document to update pin position in case controller is not the document.\r\n    window.addEventListener('scroll', this._updatePinInContainer);\r\n    window.addEventListener('resize', this._updatePinInContainer);\r\n    window.addEventListener('resize', this._updateRelativePinSpacer);\r\n    // add mousewheel listener to catch scrolls over fixed elements\r\n    _pin.addEventListener('mousewheel', this._onMousewheelOverPin);\r\n    _pin.addEventListener('DOMMouseScroll', this._onMousewheelOverPin);\r\n\r\n    _util.log(3, 'added pin');\r\n\r\n    // finally update the pin to init\r\n    this._updatePinState();\r\n\r\n    return this;\r\n  }\r\n\r\n  removePin(reset) {\r\n    if (_pin) {\r\n      if (_state === SCENE_STATE_DURING) {\r\n        this._updatePinState(true); // force unpin at position\r\n      }\r\n      if (reset || !_controller) { // if there's no controller no progress was made anyway...\r\n        const pinTarget = _pinOptions.spacer.firstChild; // usually the pin element, but may be another spacer (cascaded pins)...\r\n        if (pinTarget.hasAttribute(PIN_SPACER_ATTRIBUTE)) { // copy margins to child spacer\r\n          const style = _pinOptions.spacer.style;\r\n          const values = ['margin', 'marginLeft', 'marginRight', 'marginTop', 'marginBottom'];\r\n          const margins = {};\r\n          values.forEach((val) => {\r\n            margins[val] = style[val] || '';\r\n          });\r\n          _util.css(pinTarget, margins);\r\n        }\r\n        _pinOptions.spacer.parentNode.insertBefore(pinTarget, _pinOptions.spacer);\r\n        _pinOptions.spacer.parentNode.removeChild(_pinOptions.spacer);\r\n        if (!_pin.parentNode.hasAttribute(PIN_SPACER_ATTRIBUTE)) { // if it's the last pin for this element -> restore inline styles\r\n          // TODO: only correctly set for first pin (when cascading) - how to fix?\r\n          _util.css(_pin, _pin.___origStyle);\r\n          delete _pin.___origStyle;\r\n        }\r\n      }\r\n      window.removeEventListener('scroll', this._updatePinInContainer);\r\n      window.removeEventListener('resize', this._updatePinInContainer);\r\n      window.removeEventListener('resize', this._updateRelativePinSpacer);\r\n      _pin.removeEventListener('mousewheel', this._onMousewheelOverPin);\r\n      _pin.removeEventListener('DOMMouseScroll', this._onMousewheelOverPin);\r\n      _pin = undefined;\r\n      _util.log(3, `removed pin (reset: ${reset ? 'true' : 'false'})`);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  // class toggle\r\n\r\n  setClassToggle(element, classes) {\r\n    const elems = _util.get.elements(element);\r\n    if (elems.length === 0 || !_util.type.String(classes)) {\r\n      _util.log(1, `ERROR calling method 'setClassToggle()': Invalid ${elems.length === 0 ? 'element' : 'classes'} supplied.`);\r\n      return this;\r\n    }\r\n    if (_cssClassElems.length > 0) {\r\n      // remove old ones\r\n      this.removeClassToggle();\r\n    }\r\n    _cssClasses = classes;\r\n    _cssClassElems = elems;\r\n    this.on('enter.internal_class leave.internal_class', (e) => {\r\n      const toggle = e.type === 'enter' ? _util.addClass : _util.removeClass;\r\n      _cssClassElems.forEach((elem, key) => {\r\n        toggle(elem, _cssClasses);\r\n      });\r\n    });\r\n    return this;\r\n  }\r\n\r\n  removeClassToggle(reset) {\r\n    if (reset) {\r\n      _cssClassElems.forEach((elem, key) => {\r\n        _util.removeClass(elem, _cssClasses);\r\n      });\r\n    }\r\n    this.off('start.internal_class end.internal_class');\r\n    _cssClasses = undefined;\r\n    _cssClassElems = [];\r\n    return this;\r\n  }\r\n\r\n  // gsap\r\n\r\n  _updateTweenProgress() {\r\n    if (_tween) {\r\n      const progress = this.progress();\r\n      const state = this.state();\r\n      if (_tween.repeat && _tween.repeat() === -1) {\r\n        // infinite loop, so not in relation to progress\r\n        if (state === 'DURING' && _tween.paused()) {\r\n          _tween.play();\r\n        } else if (state !== 'DURING' && !_tween.paused()) {\r\n          _tween.pause();\r\n        }\r\n      } else if (progress !== _tween.progress()) { // do we even need to update the progress?\r\n        // no infinite loop - so should we just play or go to a specific point in time?\r\n        if (this.duration() === 0) {\r\n          // play the animation\r\n          if (progress > 0) { // play from 0 to 1\r\n            _tween.play();\r\n          } else { // play from 1 to 0\r\n            _tween.reverse();\r\n          }\r\n        } else {\r\n          // go to a specific point in time\r\n          if (this.tweenChanges() && _tween.tweenTo) {\r\n            // go smooth\r\n            _tween.tweenTo(progress * _tween.duration());\r\n          } else {\r\n            // just hard set it\r\n            _tween.progress(progress).pause();\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  setTween(TweenObject, duration, params) {\r\n    let newTween;\r\n    if (arguments.length > 1) {\r\n      if (arguments.length < 3) {\r\n        params = duration;\r\n        duration = 1;\r\n      }\r\n      TweenObject = window.TweenMax.to(TweenObject, duration, params);\r\n    }\r\n    try {\r\n      // wrap Tween into a Timeline Object if available to include delay and repeats in the duration and standardize methods.\r\n      if (window.TimelineMax) {\r\n        newTween = new window.TimelineMax({ smoothChildTiming: true })\r\n          .add(TweenObject);\r\n      } else {\r\n        newTween = TweenObject;\r\n      }\r\n      newTween.pause();\r\n    } catch (event) {\r\n      _util.log(1, \"ERROR calling method 'setTween()': Supplied argument is not a valid TweenObject\");\r\n      return this;\r\n    }\r\n    if (_tween) { // kill old tween?\r\n      this.removeTween();\r\n    }\r\n    _tween = newTween;\r\n\r\n    // some properties need to be transferred it to the wrapper, otherwise they would get lost.\r\n    if (TweenObject.repeat && TweenObject.repeat() === -1) { // TweenMax or TimelineMax Object?\r\n      _tween.repeat(-1);\r\n      _tween.yoyo(TweenObject.yoyo());\r\n    }\r\n\r\n    // (BUILD) - REMOVE IN MINIFY - START\r\n\r\n    // Some tween validations and debugging helpers\r\n\r\n    if (this.tweenChanges() && !_tween.tweenTo) {\r\n      _util.log(2, 'WARNING: tweenChanges will only work if the TimelineMax object is available for ScrollMagic.');\r\n    }\r\n\r\n    // check if there are position tweens defined for the trigger and warn about it :)\r\n    if (_tween && this.controller() && this.triggerElement() && this.loglevel() >= 2) { // controller is needed to know scroll direction.\r\n      const triggerTweens = window.TweenMax.getTweensOf(this.triggerElement());\r\n      const vertical = this.controller().info('vertical');\r\n      triggerTweens.forEach((value, index) => {\r\n        const tweenvars = value.vars.css || value.vars;\r\n        const condition = vertical ? (tweenvars.top !== undefined || tweenvars.bottom !== undefined) : (tweenvars.left !== undefined || tweenvars.right !== undefined);\r\n        if (condition) {\r\n          _util.log(2, 'WARNING: Tweening the position of the trigger element affects the scene timing and should be avoided!');\r\n        }\r\n      });\r\n    }\r\n\r\n    // warn about tween overwrites, when an element is tweened multiple times\r\n    if (parseFloat(window.TweenMax.version) >= 1.14) { // onOverwrite only present since GSAP v1.14.0\r\n      const list = _tween.getChildren ? _tween.getChildren(true, true, false) : [_tween]; // get all nested tween objects\r\n      const newCallback = () => {\r\n        _util.log(2, 'WARNING: tween was overwritten by another. To learn how to avoid this issue see here: https://github.com/janpaepke/ScrollMagic/wiki/WARNING:-tween-was-overwritten-by-another');\r\n      };\r\n      for (let i = 0, thisTween, oldCallback; i < list.length; i++) {\r\n        /* jshint loopfunc: true */\r\n        thisTween = list[i];\r\n        if (oldCallback !== newCallback) { // if tweens is added more than once\r\n          oldCallback = thisTween.vars.onOverwrite;\r\n          thisTween.vars.onOverwrite = function () {\r\n            if (oldCallback) {\r\n              oldCallback.apply(this, arguments);\r\n            }\r\n            newCallback.apply(this, arguments);\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    _util.log(3, 'added tween');\r\n\r\n    // (BUILD) - REMOVE IN MINIFY - END\r\n\r\n    this._updateTweenProgress();\r\n\r\n    return this;\r\n  }\r\n\r\n  removeTween(reset) {\r\n    if (_tween) {\r\n      if (reset) {\r\n        _tween.progress(0).pause();\r\n      }\r\n      _tween.kill();\r\n      _tween = undefined;\r\n      _util.log(3, `removed tween (reset: ${reset ? 'true' : 'false'})`);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  // indicators\r\n\r\n  addIndicators(options) {\r\n    if (!_indicator) {\r\n      options = _util.extend({}, DEFAULT_INDICATOR_OPTIONS, options);\r\n\r\n      _indicator = new Indicator(this, options);\r\n\r\n      this.on('add.plugin_addIndicators', _indicator.add.bind(_indicator));\r\n      this.on('remove.plugin_addIndicators', _indicator.remove.bind(_indicator));\r\n      this.on('destroy.plugin_addIndicators', this.removeIndicators);\r\n\r\n      // it the scene already has a controller we can start right away.\r\n      if (this.controller()) {\r\n        _indicator.add();\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  removeIndicators() {\r\n    if (_indicator) {\r\n      _indicator.remove();\r\n      this.off('*.plugin_addIndicators');\r\n      _indicator = undefined;\r\n    }\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default Scene;\r\n","/* eslint-env browser */\r\n\r\nimport _util from './_util';\r\nimport Scene from './Scene';\r\n\r\nconst PIN_SPACER_ATTRIBUTE = 'data-scrollmagic-pin-spacer';\r\n\r\nconst NAMESPACE = 'ScrollWizardry.Controller';\r\n\r\nconst SCROLL_DIRECTION_FORWARD = 'FORWARD';\r\nconst SCROLL_DIRECTION_REVERSE = 'REVERSE';\r\nconst SCROLL_DIRECTION_PAUSED = 'PAUSED';\r\n\r\nconst EDGE_OFFSET = 15; // minimum edge distance, added to indentation\r\n\r\nlet _sceneObjects = [];\r\nlet _updateScenesOnNextCycle = false;\r\nlet _scrollPos = 0;\r\nlet _scrollDirection = SCROLL_DIRECTION_PAUSED;\r\nlet _isDocument = true;\r\nlet _viewPortSize = 0;\r\nlet _enabled = true;\r\nlet _updateTimeout;\r\nlet _refreshTimeout;\r\n\r\nconst CONTROLLER_OPTIONS = {\r\n  defaults: {\r\n    container: window,\r\n    vertical: true,\r\n    globalSceneOptions: {},\r\n    loglevel: 2,\r\n    refreshInterval: 100,\r\n    addIndicators: false,\r\n  },\r\n};\r\n\r\nconst DEFAULT_OPTIONS = CONTROLLER_OPTIONS.defaults;\r\n\r\nclass Controller {\r\n  constructor(options) {\r\n    this.options = _util.extend({}, DEFAULT_OPTIONS, options);\r\n\r\n    this.options.container = _util.get.elements(this.options.container)[0];\r\n\r\n    // check scroll container\r\n    if (!this.options.container) {\r\n      _util.log(1, `ERROR creating object ${NAMESPACE}: No valid scroll container supplied`);\r\n      throw Error(`${NAMESPACE} init failed.`); // cancel\r\n    }\r\n\r\n    _isDocument = this.options.container === window || this.options.container === document.body || !document.body.contains(this.options.container);\r\n\r\n    // normalize to window\r\n    if (_isDocument) {\r\n      this.options.container = window;\r\n    }\r\n\r\n    // update container size immediately\r\n    _viewPortSize = this._getViewportSize();\r\n\r\n    // set event handlers\r\n    this.options.container.addEventListener('resize', (event) => {\r\n      this._onChange(event);\r\n    });\r\n    this.options.container.addEventListener('scroll', (event) => {\r\n      this._onChange(event);\r\n    });\r\n\r\n    const ri = parseInt(this.options.refreshInterval, 10);\r\n    this.options.refreshInterval = _util.type.Number(ri) ? ri : DEFAULT_OPTIONS.refreshInterval;\r\n    this._scheduleRefresh();\r\n\r\n    // indicators\r\n    this._info = this.info();\r\n    this._container = this._info.container;\r\n    this._isDocument = this._info.isDocument;\r\n    this._vertical = this._info.vertical;\r\n    this._indicators = { // container for all indicators and methods\r\n      groups: [],\r\n    };\r\n\r\n    if (this.options.addIndicators) {\r\n      this._container.addEventListener('resize', this._handleTriggerPositionChange.bind(this));\r\n      if (!this._isDocument) {\r\n        window.addEventListener('resize', this._handleTriggerPositionChange.bind(this));\r\n        window.addEventListener('scroll', this._handleTriggerPositionChange.bind(this));\r\n      }\r\n      // update all related bounds containers\r\n      this._container.addEventListener('resize', this._handleBoundsPositionChange.bind(this));\r\n      this._container.addEventListener('scroll', this._handleBoundsPositionChange.bind(this));\r\n    }\r\n\r\n    _util.log(3, `added new ${NAMESPACE}`);\r\n  }\r\n\r\n  _scheduleRefresh() {\r\n    if (this.options.refreshInterval > 0) {\r\n      _refreshTimeout = window.setTimeout(() => {\r\n        this._refresh();\r\n      }, this.options.refreshInterval);\r\n    }\r\n  }\r\n\r\n  _getScrollPos() {\r\n    return this.options.vertical ? _util.get.scrollTop(this.options.container) : _util.get.scrollLeft(this.options.container);\r\n  }\r\n\r\n  _getViewportSize() {\r\n    return this.options.vertical ? _util.get.height(this.options.container) : _util.get.width(this.options.container);\r\n  }\r\n\r\n  _setScrollPos(pos) {\r\n    if (this.options.vertical) {\r\n      if (_isDocument) {\r\n        window.scrollTo(_util.get.scrollLeft(), pos);\r\n      } else {\r\n        this.options.container.scrollTop = pos;\r\n      }\r\n    } else if (_isDocument) {\r\n      window.scrollTo(pos, _util.get.scrollTop());\r\n    } else {\r\n      this.options.container.scrollLeft = pos;\r\n    }\r\n  }\r\n\r\n  _updateScenes() {\r\n    if (_enabled && _updateScenesOnNextCycle) {\r\n      // determine scenes to update\r\n      const scenesToUpdate = _util.type.Array(_updateScenesOnNextCycle) ? _updateScenesOnNextCycle : _sceneObjects.slice(0);\r\n\r\n      // reset scenes\r\n      _updateScenesOnNextCycle = false;\r\n\r\n      const oldScrollPos = _scrollPos;\r\n\r\n      // update scroll pos now instead of on change, as it might have changed since scheduling (i.e. in-browser smooth scroll)\r\n      _scrollPos = this.scrollPos();\r\n\r\n      const deltaScroll = _scrollPos - oldScrollPos;\r\n\r\n      if (deltaScroll !== 0) { // scroll position changed?\r\n        _scrollDirection = (deltaScroll > 0) ? SCROLL_DIRECTION_FORWARD : SCROLL_DIRECTION_REVERSE;\r\n      }\r\n\r\n      // reverse order of scenes if scrolling reverse\r\n      if (_scrollDirection === SCROLL_DIRECTION_REVERSE) {\r\n        scenesToUpdate.reverse();\r\n      }\r\n\r\n      // update scenes\r\n      scenesToUpdate.forEach((scene, index) => {\r\n        _util.log(3, `updating scene ${index + 1}/${scenesToUpdate.length} (${_sceneObjects.length} total)`);\r\n        scene.update(true);\r\n      });\r\n\r\n      if (scenesToUpdate.length === 0 && this.options.loglevel >= 3) {\r\n        _util.log(3, 'updating 0 scenes (nothing added to controller)');\r\n      }\r\n    }\r\n  }\r\n\r\n  _debounceUpdate() {\r\n    _updateTimeout = _util.rAF(() => {\r\n      this._updateScenes();\r\n    });\r\n  }\r\n\r\n  _onChange(event) {\r\n    _util.log(3, 'event fired causing an update:', event.type);\r\n    if (event.type === 'resize') {\r\n      // resize\r\n      _viewPortSize = this._getViewportSize();\r\n      _scrollDirection = SCROLL_DIRECTION_PAUSED;\r\n    }\r\n    // schedule update\r\n    if (_updateScenesOnNextCycle !== true) {\r\n      _updateScenesOnNextCycle = true;\r\n      this._debounceUpdate();\r\n    }\r\n  }\r\n\r\n  _refresh() {\r\n    if (!_isDocument) {\r\n      // simulate resize event, only works for viewport relevant param (performance)\r\n      if (_viewPortSize !== this._getViewportSize()) {\r\n        let resizeEvent;\r\n        try {\r\n          resizeEvent = new Event('resize', { bubbles: false, cancelable: false });\r\n        } catch (event) { // stupid IE\r\n          resizeEvent = document.createEvent('Event');\r\n          resizeEvent.initEvent('resize', false, false);\r\n        }\r\n        this.options.container.dispatchEvent(resizeEvent);\r\n      }\r\n    }\r\n\r\n    // refresh all scenes\r\n    _sceneObjects.forEach((scene, index) => {\r\n      scene.refresh();\r\n    });\r\n\r\n    this._scheduleRefresh();\r\n  }\r\n\r\n  _sortScenes(ScenesArray) {\r\n    if (ScenesArray.length <= 1) {\r\n      return ScenesArray;\r\n    }\r\n    const scenes = ScenesArray.slice(0);\r\n    scenes.sort((a, b) => (a.scrollOffset() > b.scrollOffset() ? 1 : -1));\r\n    return scenes;\r\n  }\r\n\r\n  addScene(newScene) {\r\n    if (_util.type.Array(newScene)) {\r\n      newScene.forEach((scene, index) => {\r\n        this.addScene(scene);\r\n      });\r\n    } else if (newScene.controller() !== this) {\r\n      newScene.addTo(this);\r\n    } else if (_sceneObjects.indexOf(newScene) < 0) {\r\n      // new scene\r\n      _sceneObjects.push(newScene); // add to array\r\n      _sceneObjects = this._sortScenes(_sceneObjects); // sort\r\n      newScene.on('shift.controller_sort', () => { // resort whenever scene moves\r\n        _sceneObjects = this._sortScenes(_sceneObjects);\r\n      });\r\n      // insert global defaults.\r\n      for (const key in this.options.globalSceneOptions) {\r\n        if (newScene[key]) {\r\n          newScene[key].call(newScene, this.options.globalSceneOptions[key]);\r\n        }\r\n      }\r\n      _util.log(3, `adding Scene (now ${_sceneObjects.length} total)`);\r\n    }\r\n\r\n    // indicators\r\n\r\n    if (this.options.addIndicators) {\r\n      if (newScene instanceof Scene && newScene.controller() === this) {\r\n        newScene.addIndicators();\r\n      }\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  removeScene(scene) {\r\n    if (_util.type.Array(scene)) {\r\n      scene.forEach((_scene, index) => {\r\n        this.removeScene(_scene);\r\n      });\r\n    } else {\r\n      const index = _sceneObjects.indexOf(scene);\r\n      if (index > -1) {\r\n        scene.off('shift.controller_sort');\r\n        _sceneObjects.splice(index, 1);\r\n        _util.log(3, `removing Scene (now ${_sceneObjects.length} left)`);\r\n        scene.remove();\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  updateScene(scene, immediately) {\r\n    if (_util.type.Array(scene)) {\r\n      scene.forEach((_scene, index) => {\r\n        this.updateScene(_scene, immediately);\r\n      });\r\n    } else if (immediately) {\r\n      scene.update(true);\r\n\r\n    // if _updateScenesOnNextCycle is true, all connected scenes are already scheduled for update\r\n    } else if (_updateScenesOnNextCycle !== true) {\r\n      // prep array for next update cycle\r\n      _updateScenesOnNextCycle = _updateScenesOnNextCycle || [];\r\n      if (_updateScenesOnNextCycle.indexOf(scene) === -1) {\r\n        _updateScenesOnNextCycle.push(scene);\r\n      }\r\n      _updateScenesOnNextCycle = this._sortScenes(_updateScenesOnNextCycle); // sort\r\n      this._debounceUpdate();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  update(immediately) {\r\n    this._onChange({ type: 'resize' }); // will update size and set _updateScenesOnNextCycle to true\r\n    if (immediately) {\r\n      this._updateScenes();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  scrollTo(scrollTarget, additionalParameter) {\r\n    if (_util.type.Number(scrollTarget)) { // excecute\r\n      this._setScrollPos.call(this.options.container, scrollTarget, additionalParameter);\r\n    } else if (_util.type.Function(scrollTarget)) { // assign new scroll function\r\n      this._setScrollPos = scrollTarget;\r\n    } else if (scrollTarget instanceof HTMLElement) { // scroll to element\r\n      let elem = _util.get.elements(scrollTarget)[0];\r\n      if (elem) {\r\n        // if parent is pin spacer, use spacer position instead so correct start position is returned for pinned elements.\r\n        while (elem.parentNode.hasAttribute(PIN_SPACER_ATTRIBUTE)) {\r\n          elem = elem.parentNode;\r\n        }\r\n\r\n        // which param is of interest ?\r\n        const param = this.options.vertical ? 'top' : 'left';\r\n\r\n        // container position is needed because element offset is returned in relation to document, not in relation to container.\r\n        const containerOffset = _util.get.offset(this.options.container);\r\n\r\n        const elementOffset = _util.get.offset(elem);\r\n\r\n        if (!_isDocument) { // container is not the document root, so substract scroll Position to get correct trigger element position relative to scrollcontent\r\n          containerOffset[param] -= this.scrollPos();\r\n        }\r\n\r\n        this.scrollTo(elementOffset[param] - containerOffset[param], additionalParameter);\r\n      } else {\r\n        _util.log(2, 'scrollTo(): The supplied argument is invalid. Scroll cancelled.', scrollTarget);\r\n      }\r\n    } else { // scroll to scene\r\n      if (scrollTarget.controller() === this) { // check if the controller is associated with this scene\r\n        this.scrollTo(scrollTarget.scrollOffset(), additionalParameter);\r\n      } else {\r\n        _util.log(2, 'scrollTo(): The supplied scene does not belong to this controller. Scroll cancelled.', scrollTarget);\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  scrollPos(scrollPosMethod) {\r\n    if (!arguments.length) { // get\r\n      return this._getScrollPos.call(this);\r\n    } // set\r\n    if (_util.type.Function(scrollPosMethod)) {\r\n      this._getScrollPos = scrollPosMethod;\r\n    } else {\r\n      _util.log(2, \"Provided value for method 'scrollPos' is not a function. To change the current scroll position use 'scrollTo()'.\");\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  info(about) {\r\n    const values = {\r\n      size: _viewPortSize, // contains height or width (in regard to orientation)\r\n      vertical: this.options.vertical,\r\n      scrollPos: _scrollPos,\r\n      scrollDirection: _scrollDirection,\r\n      container: this.options.container,\r\n      isDocument: _isDocument,\r\n    };\r\n    if (values[about]) {\r\n      return values[about];\r\n    }\r\n    return values;\r\n  }\r\n\r\n  loglevel(newLoglevel) {\r\n    if (!arguments.length) { // get\r\n      return this.options.loglevel;\r\n    } else if (this.options.loglevel !== newLoglevel) { // set\r\n      this.options.loglevel = newLoglevel;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  enabled(newState) {\r\n    if (!arguments.length) { // get\r\n      return _enabled;\r\n    } else if (_enabled !== newState) { // set\r\n      _enabled = !!newState;\r\n      this.updateScene(_sceneObjects, true);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  destroy(resetScenes) {\r\n    window.clearTimeout(_refreshTimeout);\r\n\r\n    let i = _sceneObjects.length;\r\n\r\n    while (i--) {\r\n      _sceneObjects[i].destroy(resetScenes);\r\n    }\r\n\r\n    this.options.container.removeEventListener('resize', (event) => {\r\n      this._onChange(event);\r\n    });\r\n    this.options.container.removeEventListener('scroll', (event) => {\r\n      this._onChange(event);\r\n    });\r\n\r\n    _util.cAF(_updateTimeout);\r\n\r\n    _util.log(3, `destroyed ${NAMESPACE} (reset: ${resetScenes ? 'true' : 'false'})`);\r\n\r\n    // indicators\r\n\r\n    if (this.options.addIndicators) {\r\n      this._container.removeEventListener('resize', this._handleTriggerPositionChange.bind(this));\r\n      if (!this._isDocument) {\r\n        window.removeEventListener('resize', this._handleTriggerPositionChange.bind(this));\r\n        window.removeEventListener('scroll', this._handleTriggerPositionChange.bind(this));\r\n      }\r\n      this._container.removeEventListener('resize', this._handleBoundsPositionChange.bind(this));\r\n      this._container.removeEventListener('scroll', this._handleBoundsPositionChange.bind(this));\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  // indicators\r\n\r\n  // event handler for when associated bounds markers need to be repositioned\r\n  _handleBoundsPositionChange() {\r\n    this.updateBoundsPositions();\r\n  }\r\n\r\n  // event handler for when associated trigger groups need to be repositioned\r\n  _handleTriggerPositionChange() {\r\n    this.updateTriggerGroupPositions();\r\n  }\r\n\r\n  // updates the position of the bounds container to aligned to the right for vertical containers and to the bottom for horizontal\r\n  updateBoundsPositions(specificIndicator) {\r\n    // constant for all bounds\r\n    const groups = specificIndicator ?\r\n      [_util.extend({}, specificIndicator.triggerGroup, { members: [specificIndicator] })] : // create a group with only one element\r\n      this._indicators.groups; // use all\r\n    let g = groups.length;\r\n    const css = {};\r\n    const paramPos = this._vertical ? 'left' : 'top';\r\n    const paramDimension = this._vertical ? 'width' : 'height';\r\n    const edge = this._vertical ?\r\n      _util.get.scrollLeft(this._container) + _util.get.width(this._container) - EDGE_OFFSET :\r\n      _util.get.scrollTop(this._container) + _util.get.height(this._container) - EDGE_OFFSET;\r\n    let b;\r\n    let triggerSize;\r\n    let group;\r\n    while (g--) { // group loop\r\n      group = groups[g];\r\n      b = group.members.length;\r\n      triggerSize = _util.get[paramDimension](group.element.firstChild);\r\n      while (b--) { // indicators loop\r\n        css[paramPos] = edge - triggerSize;\r\n        _util.css(group.members[b].bounds, css);\r\n      }\r\n    }\r\n  }\r\n\r\n  // updates the positions of all trigger groups attached to a controller or a specific one, if provided\r\n  updateTriggerGroupPositions(specificGroup) {\r\n    // constant vars\r\n    const groups = specificGroup ? [specificGroup] : this._indicators.groups;\r\n    let i = groups.length;\r\n    const container = this._isDocument ? document.body : this._container;\r\n    const containerOffset = this._isDocument ? { top: 0, left: 0 } : _util.get.offset(container, true);\r\n    const edge = this._vertical ?\r\n      _util.get.width(this._container) - EDGE_OFFSET :\r\n      _util.get.height(this._container) - EDGE_OFFSET;\r\n    const paramDimension = this._vertical ? 'width' : 'height';\r\n    const paramTransform = this._vertical ? 'Y' : 'X';\r\n    // changing vars\r\n    let group;\r\n    let elem;\r\n    let pos;\r\n    let elemSize;\r\n    let transform;\r\n    while (i--) {\r\n      group = groups[i];\r\n      elem = group.element;\r\n      pos = group.triggerHook * this.info('size');\r\n      elemSize = _util.get[paramDimension](elem.firstChild.firstChild);\r\n      transform = pos > elemSize ? `translate${paramTransform}(-100%)` : '';\r\n\r\n      _util.css(elem, {\r\n        top: containerOffset.top + (this._vertical ? pos : edge - group.members[0].options.indent),\r\n        left: containerOffset.left + (this._vertical ? edge - group.members[0].options.indent : pos),\r\n      });\r\n      _util.css(elem.firstChild.firstChild, {\r\n        '-ms-transform': transform,\r\n        '-webkit-transform': transform,\r\n        transform,\r\n      });\r\n    }\r\n  }\r\n\r\n  // updates the label for the group to contain the name, if it only has one member\r\n  updateTriggerGroupLabel(group) {\r\n    const text = `trigger${group.members.length > 1 ? '' : ` ${group.members[0].options.name}`}`;\r\n    const elem = group.element.firstChild.firstChild;\r\n    const doUpdate = elem.textContent !== text;\r\n    if (doUpdate) {\r\n      elem.textContent = text;\r\n      if (this._vertical) { // bounds position is dependent on text length, so update\r\n        this.updateBoundsPositions();\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Controller;\r\n","import Controller from './Controller';\nimport Scene from './Scene';\n\nexport default {\n  Controller,\n  Scene,\n};\n"],"names":["U","i","_type","Object","prototype","toString","call","v","replace","toLowerCase","String","Function","Array","isArray","Number","parseFloat","DomElement","HTMLElement","o","nodeType","nodeName","type","floatval","number","_getComputedStyle","elem","currentStyle","window","getComputedStyle","_dimension","which","outer","includeMargin","document","charAt","toUpperCase","substr","dimension","style","marginTop","marginBottom","marginLeft","marginRight","_camelCase","str","g","extend","obj","arguments","length","key","hasOwnProperty","isMarginCollapseType","indexOf","lastTime","vendors","_requestAnimationFrame","requestAnimationFrame","_cancelAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","rAF","bind","cAF","loglevels","console","log","method","loglevel","now","time","getHours","slice","getMinutes","getSeconds","getMilliseconds","args","splice","func","unshift","apply","_get","elements","selector","arr","querySelectorAll","e","ref","scrollTop","pageYOffset","scrollLeft","pageXOffset","width","height","offset","relativeToViewport","top","left","getBoundingClientRect","rect","get","addClass","classname","classList","add","className","removeClass","remove","RegExp","split","join","css","options","forEach","option","val","Event","namespace","target","vars","currentTarget","timeStamp","timestamp","FONT_SIZE","ZINDEX","TPL","color","inner","createElement","textContent","element","appendChild","zIndex","wrapper","_autoindex","Indicator","scene","name","_elemBounds","bounds","_elemStart","start","colorStart","_elemEnd","end","colorEnd","_boundsContainer","parent","_util","firstChild","_vertical","_ctrl","triggerGroup","undefined","controller","info","isDocument","body","position","on","_handleTriggerParamsChange","_handleBoundsParamsChange","_updateTriggerGroup","_updateBounds","updateBoundsPositions","off","members","group","_indicators","updateTriggerGroupLabel","updateTriggerGroupPositions","_removeTriggerGroup","_removeBounds","event","what","indent","parentNode","removeChild","_addBounds","triggerPosition","duration","triggerElem","trigger","colorTrigger","newGroup","triggerHook","groups","push","closeEnough","abs","_addTriggerGroup","PIN_SPACER_ATTRIBUTE","NAMESPACE","SCENE_STATE_BEFORE","SCENE_STATE_DURING","SCENE_STATE_AFTER","_state","_progress","_scrollOffset","_triggerPos","_durationUpdateMethod","_controller","_listeners","_pin","_pinOptions","_cssClasses","_cssClassElems","_tween","_indicator","DEFAULT_INDICATOR_OPTIONS","SCENE_OPTIONS","match","perc","Error","translate","onCenter","onEnter","onLeave","min","parseInt","DEFAULT_OPTIONS","defaults","Scene","optionName","_addSceneOption","_validateOption","_updateTriggerElementPosition","update","_updateScrollOffset","durationChanged","reason","_updatePinState","_updatePinDimensions","removePin","reset","removeClassToggle","_updateTweenProgress","removeTween","names","trim","fullname","nameparts","eventname","removeList","keys","list","listener","listeners","removeScene","_updateDuration","addEventListener","_onContainerResize","addScene","removeEventListener","tmpParent","immediately","enabled","scrollPos","newProgress","startPos","endPos","progress","updateScene","doUpdate","oldState","scrollDirection","reverseOrForward","reverse","eventVars","state","stateChanged","eventName","triggerElement","suppressEvents","varname","_changeOption","newval","elementPos","telem","controllerInfo","containerOffset","container","param","vertical","hasAttribute","elementOffset","changed","check","validate","value","logMSG","message","oldval","newVal","shifts","pos","forceUnpin","containerInfo","pinTarget","spacer","fixedPos","scrollDistance","round","newCSS","inFlow","change","pushFollowers","after","before","during","marginCollapse","relSize","autoFullWidth","preventDefault","_setScrollPos","wheelDelta","detail","settings","defaultSettings","parentDisplay","display","boundsParams","pinCSS","concat","sizeCSS","insertBefore","spacerCSS","setAttribute","spacerClass","___origStyle","pinInlineCSS","copyStyles","_updatePinInContainer","_updateRelativePinSpacer","_onMousewheelOverPin","values","margins","classes","elems","toggle","repeat","paused","play","pause","tweenChanges","tweenTo","TweenObject","params","newTween","TweenMax","to","TimelineMax","smoothChildTiming","yoyo","triggerTweens","getTweensOf","index","tweenvars","condition","bottom","right","version","getChildren","newCallback","oldCallback","thisTween","onOverwrite","kill","removeIndicators","SCROLL_DIRECTION_FORWARD","SCROLL_DIRECTION_REVERSE","SCROLL_DIRECTION_PAUSED","EDGE_OFFSET","_sceneObjects","_updateScenesOnNextCycle","_scrollPos","_scrollDirection","_isDocument","_viewPortSize","_enabled","_updateTimeout","_refreshTimeout","CONTROLLER_OPTIONS","Controller","contains","_getViewportSize","_onChange","ri","refreshInterval","_scheduleRefresh","_info","_container","addIndicators","_handleTriggerPositionChange","_handleBoundsPositionChange","_refresh","scrollTo","scenesToUpdate","oldScrollPos","deltaScroll","_updateScenes","_debounceUpdate","resizeEvent","bubbles","cancelable","createEvent","initEvent","dispatchEvent","refresh","ScenesArray","scenes","sort","a","b","scrollOffset","newScene","addTo","_sortScenes","globalSceneOptions","_scene","scrollTarget","additionalParameter","scrollPosMethod","_getScrollPos","about","newLoglevel","newState","resetScenes","destroy","specificIndicator","paramPos","paramDimension","edge","triggerSize","specificGroup","paramTransform","elemSize","transform","text"],"mappings":"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"}